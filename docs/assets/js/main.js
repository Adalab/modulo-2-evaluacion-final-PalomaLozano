"use strict";const inputSearch=document.querySelector(".js_search_input"),buttonSearch=document.querySelector(".js_button_search"),listTitles=document.querySelector(".js_ul_titles"),favoriteTitles=document.querySelector(".js_ul_favorite");let tvListData=[],favorites=[];function tvPaintedList(){let t="",e="";for(let i of tvListData){e=!0===favoriteShow(i)?"favorite":"",t+='<li class="title_list_title">'+i.show.name,i.show.image?t+=`<img src="${i.show.image.medium}" class="title_list js_list"  ${e} id="${i.show.id}></li>`:t+='<img src="https://via.placeholder.com/210x295/ffffff/666666/?text=TV"></li>'}listTitles.innerHTML=t,listenTvFavSelected()}function tvFavoriteSelected(){let t="",e="";for(let i of favorites){e=!0===favoriteShow(i)?"favorite":"",t+='<div class= "container_favorites">',t+='<li class="">'+i.show.name,i.show.image?t+=`<img src="${i.show.image.medium}" id="${i.show.id} class="title_list js_list" ${e}></li>`:t+=`<img src="https://via.placeholder.com/210x295/ffffff/666666/?text=TV" id="${i.show.id}></li>`,t+="</div>"}favoriteTitles.innerHTML=t}function favoriteShow(t){return void 0!==favorites.find(e=>e.show.id===t.id)}function handleFavTvSelected(t){const e=parseInt(t.currentTarget.id),i=tvListData.find(t=>t.show.id===e),s=favorites.findIndex(t=>t.show.id===e);console.log(favorites),-1===s?favorites.push(i):favorites.splice(s,1),tvPaintedList(),tvFavoriteSelected()}function listenTvFavSelected(){const t=document.querySelectorAll(".js_list");for(const e of t)e.addEventListener("click",handleFavTvSelected)}function handleTvSearch(){let t=inputSearch.value;fetch("//api.tvmaze.com/search/shows?q="+t).then(t=>t.json()).then(t=>{tvListData=t,tvPaintedList(),prevent()})}function prevent(t){t.preventDefault()}function setInLocalStorage(){const t=JSON.stringify(tvListData);localStorage.setItem("favorites",t)}function getFromApi(){fetch("//api.tvmaze.com/search/shows?q=").then(t=>t.json()).then(t=>{tvListData=t.tvListData,tvPaintedList(),setInLocalStorage()})}function getLocalStorage(){const t=localStorage.getItem("tvListData");if(null===t)getFromApi();else{const e=JSON.parse(t);tvListData=e,tvPaintedList()}}buttonSearch.addEventListener("click",handleTvSearch),getLocalStorage();